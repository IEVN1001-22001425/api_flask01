{% extends "layout.html" %}

{% block contenido %}
{% import "_macros.html" as macros %}

<h1>Pizzería </h1>

<form action="/pizzas" method="post" novalidate>
    {{ macros.render_field(form.nombre) }}
    {{ macros.render_field(form.direccion) }}
    {{ macros.render_field(form.telefono) }}
    {{ macros.render_field(form.tamano) }}
    {{ macros.render_field(form.ingredientes) }}
    {{ macros.render_field(form.num_pizzas) }}
    <button type="submit" name="accion" value="agregar" class="btn btn-primary">Agregar</button>
</form>

<hr>

<h3>Pedidos</h3>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Tamaño</th>
            <th>Ingredientes</th>
            <th>Núm. Pizzas</th>
            <th>Subtotal</th>
        </tr>
    </thead>
    <tbody>
        {% for pedido in pedidos %}
        <tr>
            <td>{{ pedido.tamano }}</td>
            <td>{{ pedido.ingredientes }}</td>
            <td>{{ pedido.num_pizzas }}</td>
            <td>${{ pedido.subtotal }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4" class="text-center">No hay pedidos aún</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<form action="/pizzas" method="post">
   
    <button type="submit" name="accion" value="quitar" class="btn btn-danger">Quitar</button>
    <button type="submit" name="accion" value="terminar" class="btn btn-success">Terminar</button>
</form>

<hr>

<h3>Ventas del día </h3>

<div class="p-3 border rounded bg-light">
    {% for venta in ventas_dia %}
    <p><strong>{{ venta.nombre }}</strong> total ${{ venta.total }}</p>
    {% else %}
    <p>No hay ventas registradas aún.</p>
    {% endfor %}
    <p><strong>Ventas totales del día:</strong> ${{ total_dia or 0 }}</p>
</div>

<form action="/pizzas" method="post" class="mt-3">
    <button type="submit" name="accion" value="totales" class="btn btn-secondary">
        Ventas totales por día
    </button>
</form>

<form action="/ver_cookies_pizzas" method="get">
    <button type="submit" class="btn btn-primary">
        Ver pedidos registrados (cookies)
    </button>
</form>
{% endblock %}